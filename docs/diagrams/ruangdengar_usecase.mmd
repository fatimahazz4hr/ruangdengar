%% Mermaid fallback for Ruang Dengar Use Case Diagram
%% View with Mermaid-compatible renderer (VS Code Markdown Preview Mermaid Support)
flowchart LR
  subgraph Platform["Ruang Dengar Platform"]
    UC_Login["(Registrasi / Login)"]
    UC_Profile["(Lengkapi Profil)"]
    UC_Report["(Buat Laporan<br/>(Anonim/Identitas))"]
    UC_Evidence["(Unggah Bukti)"]
    UC_Track["(Lacak Status Laporan)"]
    UC_Notify["(Terima Notifikasi)"]
    UC_Book["(Booking Konseling)"]
    UC_Modul["(Baca Modul/Artikel Edukasi)"]

    UC_Review["(Review Laporan)"]
    UC_Classify["(Klasifikasi & Verifikasi)"]
    UC_Assign["(Assign Pendamping/Kasus)"]
    UC_Update["(Update Status Laporan)"]
    UC_ManageNotify["(Kelola Notifikasi)"]
    UC_Content["(Kelola Konten)"]
    UC_Schedule["(Kelola Jadwal)"]
    UC_Users["(Kelola Pengguna)"]
    UC_Analytics["(Lihat Statistik/Analitik)"]

    UC_CounselSchedule["(Kelola Jadwal Konseling)"]
    UC_MedicalRecord["(Catat Rekam Medis)"]
  end

  %% Actors
  Student([Mahasiswa])
  Admin([Admin/PPKPT])
  Counselor([Konselor])
  SSO(["SSO Provider\n(Microsoft/Google)"])
  AIM([AI Moderation])

  %% Student flows
  Student --> UC_Login
  Student --> UC_Profile
  Student --> UC_Report
  Student --> UC_Evidence
  Student --> UC_Track
  Student --> UC_Notify
  Student --> UC_Book
  Student --> UC_Modul

  %% Admin flows
  Admin --> UC_Review
  Admin --> UC_Classify
  Admin --> UC_Assign
  Admin --> UC_Update
  Admin --> UC_ManageNotify
  Admin --> UC_Content
  Admin --> UC_Schedule
  Admin --> UC_Users
  Admin --> UC_Analytics
  Admin --> UC_MedicalRecord

  %% Counselor flows
  Counselor --> UC_CounselSchedule
  Counselor --> UC_MedicalRecord

  %% External services
  UC_Login -. uses .-> SSO
  UC_Report -. moderate .-> AIM
  UC_Content -. moderate .-> AIM

  %% Relationships
  UC_Report -. include .-> UC_Evidence
  UC_Review -. drives .-> UC_Update
  UC_ManageNotify -. triggers .-> UC_Notify

  %% Notes (using subgraphs for readability)
  subgraph N1[ ]
    direction TB
    N1a["• Form pelaporan\n• Dukungan anonim\n• Upload bukti (foto/dokumen)"]
  end
  N1a --- UC_Report

  subgraph N2[ ]
    direction TB
    N2a["• Pilih waktu konseling\n• Konfirmasi / reschedule"]
  end
  N2a --- UC_Book

  subgraph N3[ ]
    direction TB
    N3a["• Input dan lihat rekam medis\n• Akses terbatas (Admin/Konselor)"]
  end
  N3a --- UC_MedicalRecord
